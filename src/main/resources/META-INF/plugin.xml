<idea-plugin version="2">
    <id>AndroidAOPPlugin</id>
    <name>AndroidAOP Code Viewer</name>
    <description>
        <![CDATA[
        <P>This tool generates auxiliary code for <a href="https://github.com/FlyJingFish/AndroidAOP/blob/master/README_EN.md">AndroidAOP</a> based on class files.</p>
        <P>Usage:Right-click the code you want to cut into -> click AndroidAOP Code -> click AOPCode on the right to view the auxiliary code of AndroidAOP generated by the plug-in for the target class, including the following functions:</p>
        <ul>
            <li>@AndroidAopReplaceClass</li>
            <li>@AndroidAopMatchClassMethod</li>
            <li>@AndroidAopModifyExtendsClass</li>
            <li>@AndroidAopCollectMethod</li>
        </ul>
        ]]>
    </description>
    <version>1.0.9</version>
    <vendor>FlyJingFish</vendor>
<!--    <idea-version since-build="222.4554" until-build="242.*"/>-->
    <idea-version since-build="222.4554"/>
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <depends optional="true" config-file="withByteCodeViewer.xml">ByteCodeViewer</depends>
    <change-notes><![CDATA[
        <b>Version 1.0.9</b>
        <ul>
            <li>Change logo</li>
        </ul>
        <b>Version 1.0.8</b>
        <ul>
            <li>Improve compatibility</li>
        </ul>
        <b>Version 1.0.7</b>
        <ul>
            <li>Adapt to the latest version of AndroidAOP</li>
        </ul>
        <b>Version 1.0.6</b>
        <ul>
            <li>Support no restart</li>
        </ul>
        <b>Version 1.0.5</b>
        <ul>
            <li>Add Import package</li>
        </ul>
        <b>Version 1.0.4</b>
        <ul>
            <li>Improve the function</li>
        </ul>
        <b>Version 1.0.3</b>
        <ul>
            <li>fix bug</li>
        </ul>
        <b>Version 1.0.2</b>
        <ul>
            <li>Support jar</li>
        </ul>
        <b>Version 1.0.1</b>
        <ul>
            <li>Adapt to the latest version of IC</li>
        </ul>
    ]]></change-notes>

<!--    <application-components>-->

<!--    </application-components>-->

<!--    <project-components>-->
<!--        <component>-->
<!--            <implementation-class>io.github.FlyJingFish.AndroidAopPlugin.config.AOPPluginComponent</implementation-class>-->
<!--        </component>-->
<!--    </project-components>-->

    <actions>
        <action class="io.github.FlyJingFish.AndroidAopPlugin.action.ShowAopCodeViewerAction"
                description="Shows the AndroidAOP Code from the current class"
                id="AndroidAOPPlugin"
                text="AndroidAOP Code">
            <add-to-group anchor="last" group-id="EditorPopupMenu" />
            <add-to-group anchor="last" group-id="ProjectViewPopupMenu" />
            <add-to-group anchor="last" group-id="CodeMenu" />
        </action>
        <action popup="true" id="dev.turingcomplete.intellijbytecodeplugin.analyzeByteCodeAction"
                class="dev.turingcomplete.intellijbytecodeplugin.openclassfiles._internal.AnalyzeByteCodeAction">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="CodeMenu" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
    </actions>
    <extensionPoints>
        <extensionPoint name="openClassFilesAction"
                        interface="dev.turingcomplete.intellijbytecodeplugin.openclassfiles.OpenClassFilesToolWindowAction"/>
        <extensionPoint name="byteCodeTool" interface="dev.turingcomplete.intellijbytecodeplugin.tool.ByteCodeTool"/>
        <extensionPoint name="byteCodeView"
                        interface="dev.turingcomplete.intellijbytecodeplugin.view.ByteCodeView$Creator"/>
        <extensionPoint name="byteCodeAction"
                        interface="dev.turingcomplete.intellijbytecodeplugin.view.ByteCodeAction"/>
    </extensionPoints>
    <extensions defaultExtensionNs="com.intellij">
        <applicationConfigurable groupId="tools" instance="io.github.FlyJingFish.AndroidAopPlugin.config.PluginConfig" />
        <toolWindow anchor="right" factoryClass="io.github.FlyJingFish.AndroidAopPlugin.view.AOPCodeOutlineToolWindowFactory" icon="/images/pluginIcon.svg"
                    id="AOPCode" />
        <applicationService
                serviceImplementation="io.github.FlyJingFish.AndroidAopPlugin.config.AOPPluginComponent"/>
        <projectService serviceImplementation="io.github.FlyJingFish.AndroidAopPlugin.view.ReplaceView"
                        serviceInterface="io.github.FlyJingFish.AndroidAopPlugin.view.ReplaceView" />
        <projectService serviceImplementation="io.github.FlyJingFish.AndroidAopPlugin.view.ReplaceViewKt"
            serviceInterface="io.github.FlyJingFish.AndroidAopPlugin.view.ReplaceViewKt" />
        <projectService serviceImplementation="io.github.FlyJingFish.AndroidAopPlugin.view.MatchView"
            serviceInterface="io.github.FlyJingFish.AndroidAopPlugin.view.MatchView" />
        <projectService serviceImplementation="io.github.FlyJingFish.AndroidAopPlugin.view.MatchViewKt"
                        serviceInterface="io.github.FlyJingFish.AndroidAopPlugin.view.MatchViewKt" />
        <projectService serviceImplementation="io.github.FlyJingFish.AndroidAopPlugin.view.ExtendsView"
                        serviceInterface="io.github.FlyJingFish.AndroidAopPlugin.view.ExtendsView" />
        <projectService serviceImplementation="io.github.FlyJingFish.AndroidAopPlugin.view.CollectView"
                        serviceInterface="io.github.FlyJingFish.AndroidAopPlugin.view.CollectView" />

        <applicationService
                serviceImplementation="dev.turingcomplete.intellijbytecodeplugin.settings.ByteCodeAnalyserSettingsService"/>

        <toolWindow id="Byte Code" factoryClass="dev.turingcomplete.intellijbytecodeplugin._ui.ByteCodeToolWindowFactory"
                    anchor="right" canCloseContents="true" secondary="true" icon="/icons/toolwindow.svg"/>

        <notificationGroup displayType="BALLOON" id="dev.turingcomplete.intellijbytecodeplugin.notificationGroup"/>

        <getDataRule key="dev.turingcomplete.intellijbytecodeplugin.classFileContext"
                     implementationClass="dev.turingcomplete.intellijbytecodeplugin.common.CommonDataKeys$ClassFileContextDataRule"/>
        <getDataRule key="dev.turingcomplete.intellijbytecodeplugin.classFileTab"
                     implementationClass="dev.turingcomplete.intellijbytecodeplugin.common.CommonDataKeys$ClassFileTabDataRule"/>
        <getDataRule key="dev.turingcomplete.intellijbytecodeplugin.onError"
                     implementationClass="dev.turingcomplete.intellijbytecodeplugin.common.CommonDataKeys$OnErrorDataRule"/>
        <getDataRule key="dev.turingcomplete.intellijbytecodeplugin.openInEditor"
                     implementationClass="dev.turingcomplete.intellijbytecodeplugin.common.CommonDataKeys$OpenInEditorDataRule"/>
    </extensions>
<!--    git@github.com:marcelkliemannel/intellij-byte-code-plugin.git-->
    <extensions defaultExtensionNs="dev.turingcomplete.intellijbytecodeplugin">
        <openClassFilesAction
                implementation="dev.turingcomplete.intellijbytecodeplugin.openclassfiles._internal.CurrentEditorFileAction"/>
        <openClassFilesAction
                implementation="dev.turingcomplete.intellijbytecodeplugin.openclassfiles._internal.FileChooserAction"/>

        <byteCodeTool implementation="dev.turingcomplete.intellijbytecodeplugin.tool._internal.AccessConverterTool"/>
        <byteCodeTool implementation="dev.turingcomplete.intellijbytecodeplugin.tool._internal.SignatureParserTool"/>
        <byteCodeTool implementation="dev.turingcomplete.intellijbytecodeplugin.tool._internal.InstructionsOverviewTool"/>
        <byteCodeTool implementation="dev.turingcomplete.intellijbytecodeplugin.tool._internal.ClassVersionsOverviewTool"/>

        <byteCodeView
                implementation="dev.turingcomplete.intellijbytecodeplugin.view._internal._structure.StructureView$MyCreator"/>
        <byteCodeView
                implementation="dev.turingcomplete.intellijbytecodeplugin.view._internal.PlainView$MyCreator"/>
        <byteCodeView
                implementation="dev.turingcomplete.intellijbytecodeplugin.view._internal.AsmView$MyCreator"/>
        <byteCodeView
                implementation="dev.turingcomplete.intellijbytecodeplugin.view._internal._decompiler.DecompiledView$MyCreator"/>
        <byteCodeView
                implementation="dev.turingcomplete.intellijbytecodeplugin.view._internal._constantpool.ConstantPoolView$MyCreator"/>

        <byteCodeAction implementation="dev.turingcomplete.intellijbytecodeplugin.view._internal.ReParseByteCodeAction"/>
        <byteCodeAction implementation="dev.turingcomplete.intellijbytecodeplugin.view._internal.VerifyByteCodeAction"/>
    </extensions>
</idea-plugin>
